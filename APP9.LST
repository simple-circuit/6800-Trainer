
M68HC11 Absolute Assembler   Version 2.70C:APP9.ASC


   1 A 0000                                                      
   2 A      00E4       TEMP      EQU       $00E4                 
   3 A      00E7       ADDR      EQU       $00E7                 
   4 A      00E9       FLAG      EQU       $00E9                 
   5 A      00EA       BRKADD    EQU       $00EA                 
   6 A      00EC       BRKOP     EQU       $00EC                 
   7 A 0000                                                      
   8 A                 *I/O FUNCTIONS 
   9 A      FC00       RESET     EQU       $FC00                 
  10 A      FC8A       PRTSTR    EQU       $FC8A                 
  11 A      FCC3       GETKEY    EQU       $FCC3                 
  12 A      FCDA       MKASCI    EQU       $FCDA                 
  13 A      FCE4       GET2H     EQU       $FCE4                 
  14 A      FD05       GET4H     EQU       $FD05                 
  15 A      FD28       CHG2H     EQU       $FD28                 
  16 A      FD2B       CH2HNP    EQU       $FD2B                 
  17 A      FDF8       CHG4H     EQU       $FDF8                 
  18 A      FE90       PRTDAT    EQU       $FE90                 
  19 A      FE90       PRTADD    EQU       $FE90                 
  20 A 0000                                                      
  21 A                 *VECTOR ENTRY POINTS 
  22 A      00F7       IRQV      EQU       $00F7                 
  23 A      00F4       SWIV      EQU       $00F4                 
  24 A      00FD       NMIV      EQU       $00FD                 
  25 A      FC00       RESETV    EQU       $FC00                 
  26 A 0000                                                      
  27 A                 *SPECIAL OP CODES 
  28 A                 *S1 IS SYSTEM STACK AND S2 IS USER STACK 
  29 A      0002       SS2       EQU       $02                   *SINGLE STEP: RS2, EXECUTE OP CODE, RS1 
  30 A      0003       TX2       EQU       $03                   *TRANSFER X TO S2 
  31 A      0004       T2X       EQU       $04                   *TRANSFER S2 TO X 
  32 A      0005       RS2       EQU       $05                   *SWI S1 THEN RTI TO S2 
  33 A      0015       RS1       EQU       $15                   *SWI S2 THEN RTI TO S1 
  34 A      0012       TON       EQU       $12                   *TURN TRACE ON (OUTPUT TO SERIAL AND SERIAL1) 
  35 A      0013       TOF       EQU       $13                   *TURN TRACE OFF 
  36 A 0000                                                      
  37 A                 * UART Status 0xF000 Read Only, Bit-1 Transmit Ready, Bit-0 Receive Ready 
  38 A                 *      Use: LDAA $F000 or LDAB $F000 
  39 A                 * UART Write Data 0xF001 
  40 A                 *      Use: STAA $F001 or STAB $F001 
  41 A                 * UART Read Data 0xF003 
  42 A                 *      Use: LDAA $F003, LDAB $F003, or ANDB $F003 
  43 A                 * I/O Data In at 0xF011 Digital pins D0 to D7 
  44 A                 *     Use: Any load instruction, maps to memory 
  45 A                 * I/O Data Out at 0xF010 Digital pins D8 to D15 
  46 A                 *     Use: STAB $F010 
  47 A                 * ADC Start Read at 0xF020 
  48 A                 *     Use: LDAB #ch then STAB $F020 where ch = 1 to 3 
  49 A                 * ADC High Byte at 0xF020, ADC Low Byte at 0xF021 
  50 A                 *     Use: Any load instruction, maps to memory  
  51 A                  
  52 A      F000       UARTST    EQU       $F000                 
  53 A      F001       UARTWR    EQU       $F001                 
  54 A      F003       UARTRD    EQU       $F003                 
  55 A      F010       IOWR      EQU       $F010                 
  56 A      F011       IORD      EQU       $F011                 
  57 A      F020       ADCWR     EQU       $F020                 
  58 A      F020       ADCRD     EQU       $F020                 

M68HC11 Absolute Assembler   Version 2.70C:APP9.ASC


  59 A 0000                                                      
  60 A                 *KEY PAD INPUT 
  61 A                 *$C000 = $FF FOR NO KEY PRESSED AND $00 TO $10 FOR KEY(S) PRESSED 
  62 A                 *$C003 = KEY COLUMN-3 3,6,9,C,F  BIT DATA IS LOW FOR PRESSED KEY 
  63 A                 *$C005 = KEY COLUMN-2 2,5,8,B,E  BIT DATA IS LOW FOR PRESSED KEY 
  64 A                 *$C006 = KEY COLUMN-1 0,1,4,7,A,D BIT DATA IS LOW FOR PRESSED KEY 
  65 A 0000                                                      
  66 A      C000       KEYIN     EQU       $C000                 
  67 A      C006       KEYC1     EQU       $C006                 
  68 A      C005       KEYC2     EQU       $C005                 
  69 A      C003       KEYC3     EQU       $C003                 
  70 A 0000                                                      
  71 A                 *LCD DISPLAY 
  72 A                 *$C100 = ASCII VALUE FOR LEFT MOST DIGIT, WRITE ZERO TO USE SEGMENT BIT MODE 
  73 A                 *$C101 = ASCII VALUE FOR NEXT DIGIT, WRITE ZERO TO USE SEGMENT BIT MODE 
  74 A                 *$C102 = ASCII VALUE FOR NEXT DIGIT, WRITE ZERO TO USE SEGMENT BIT MODE 
  75 A                 *$C103 = ASCII VALUE FOR NEXT DIGIT, WRITE ZERO TO USE SEGMENT BIT MODE 
  76 A                 *$C104 = ASCII VALUE FOR NEXT DIGIT, WRITE ZERO TO USE SEGMENT BIT MODE 
  77 A                 *$C105 = ASCII VALUE FOR NEXT DIGIT, WRITE ZERO TO USE SEGMENT BIT MODE 
  78 A                 *$C106 = ASCII VALUE FOR NEXT DIGIT, WRITE ZERO TO USE SEGMENT BIT MODE 
  79 A                 *$C107 = ASCII VALUE FOR RIGHT MOST DIGIT, WRITE ZERO TO USE BIT MODE 
  80 A                 *$C110 = g, $C111 = f, ..., $C117 = d.p. SEGMENT FOR LEFT MOST DIGIT 
  81 A                 *$WRITE $01 TO SET SEGMENT, $00 TO CLEAR 
  82 A                 *REMAINING DIGITS $C120, $C130, $C140, $C150, $C160, $C170, $C180 
  83 A 0000                                                      
  84 A      C100       ASCI0     EQU       $C100                 
  85 A      C101       ASCI1     EQU       $C101                 
  86 A      C102       ASCI2     EQU       $C102                 
  87 A      C103       ASCI3     EQU       $C103                 
  88 A      C104       ASCI4     EQU       $C104                 
  89 A      C105       ASCI5     EQU       $C105                 
  90 A      C106       ASCI6     EQU       $C106                 
  91 A      C107       ASCI7     EQU       $C107                 
  92 A      C110       SG0       EQU       $C110                 
  93 A      C120       SG1       EQU       $C120                 
  94 A      C130       SG2       EQU       $C130                 
  95 A      C140       SG3       EQU       $C140                 
  96 A      C150       SG4       EQU       $C150                 
  97 A      C160       SG5       EQU       $C160                 
  98 A      C170       SG6       EQU       $C170                 
  99 A      C180       SG7       EQU       $C180                 
 100 A 0000                                                      
 101 A      0000                 ORG       $0000                 
 102 A 0000 CEC100     START     LDX       #$C100                
 103 A 0003 F6F011               LDAB      $F011                 
 104 A 0006 59         LOOP      ROLB                            
 105 A 0007 2404                 BCC       ZERO                  
 106 A 0009 8631                 LDAA      #'1                   
 107 A 000B 2002                 BRA       PRNTIT                
 108 A 000D 8630       ZERO      LDAA      #'0                   
 109 A 000F A700       PRNTIT    STAA      0,X                   
 110 A 0011 08                   INX                             
 111 A 0012 8CC108               CPX       #$C108                
 112 A 0015 26EF                 BNE       LOOP                  
 113 A 0017 20E7                 BRA       START                 
 114 A 0019                                                      
 115 A 0019                                                      
 116 A                           END                             

M68HC11 Absolute Assembler   Version 2.70C:APP9.ASC



SYMBOL TABLE:  Total Entries=   58

ADCRD               F020    NMIV                00FD
ADCWR               F020    PRNTIT              000F
ADDR                00E7    PRTADD              FE90
ASCI0               C100    PRTDAT              FE90
ASCI1               C101    PRTSTR              FC8A
ASCI2               C102    RESET               FC00
ASCI3               C103    RESETV              FC00
ASCI4               C104    RS1                 0015
ASCI5               C105    RS2                 0005
ASCI6               C106    SG0                 C110
ASCI7               C107    SG1                 C120
BRKADD              00EA    SG2                 C130
BRKOP               00EC    SG3                 C140
CH2HNP              FD2B    SG4                 C150
CHG2H               FD28    SG5                 C160
CHG4H               FDF8    SG6                 C170
FLAG                00E9    SG7                 C180
GET2H               FCE4    SS2                 0002
GET4H               FD05    START               0000
GETKEY              FCC3    SWIV                00F4
IORD                F011    T2X                 0004
IOWR                F010    TEMP                00E4
IRQV                00F7    TOF                 0013
KEYC1               C006    TON                 0012
KEYC2               C005    TX2                 0003
KEYC3               C003    UARTRD              F003
KEYIN               C000    UARTST              F000
LOOP                0006    UARTWR              F001
MKASCI              FCDA    ZERO                000D

Total errors: 0
