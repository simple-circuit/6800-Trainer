
M68HC11 Absolute Assembler   Version 2.70C:app11.ASC


   1 A 0000                                                      
   2 A      00E4       TEMP      EQU       $00E4                 
   3 A      00E7       ADDR      EQU       $00E7                 
   4 A      00E9       FLAG      EQU       $00E9                 
   5 A      00EA       BRKADD    EQU       $00EA                 
   6 A      00EC       BRKOP     EQU       $00EC                 
   7 A 0000                                                      
   8 A                 *I/O FUNCTIONS 
   9 A      FC00       RESET     EQU       $FC00                 
  10 A      FC8A       PRTSTR    EQU       $FC8A                 
  11 A      FCC3       GETKEY    EQU       $FCC3                 
  12 A      FCDA       MKASCI    EQU       $FCDA                 
  13 A      FCE4       GET2H     EQU       $FCE4                 
  14 A      FD05       GET4H     EQU       $FD05                 
  15 A      FD28       CHG2H     EQU       $FD28                 
  16 A      FD2B       CH2HNP    EQU       $FD2B                 
  17 A      FDF8       CHG4H     EQU       $FDF8                 
  18 A      FE90       PRTDAT    EQU       $FE90                 
  19 A      FE90       PRTADD    EQU       $FE90                 
  20 A      FB70       OUTCH     EQU       $FB70                 
  21 A      FBEA       OUT2H     EQU       $FBEA                 
  22 A 0000                                                      
  23 A                 *VECTOR ENTRY POINTS 
  24 A      00F7       IRQV      EQU       $00F7                 
  25 A      00F4       SWIV      EQU       $00F4                 
  26 A      00FD       NMIV      EQU       $00FD                 
  27 A      FC00       RESETV    EQU       $FC00                 
  28 A 0000                                                      
  29 A                 *SPECIAL OP CODES 
  30 A                 *S1 IS SYSTEM STACK AND S2 IS USER STACK 
  31 A      0002       SS2       EQU       $02                   *SINGLE STEP: RS2, EXECUTE OP CODE, RS1 
  32 A      0003       TX2       EQU       $03                   *TRANSFER X TO S2 
  33 A      0004       T2X       EQU       $04                   *TRANSFER S2 TO X 
  34 A      0005       RS2       EQU       $05                   *SWI S1 THEN RTI TO S2 
  35 A      0015       RS1       EQU       $15                   *SWI S2 THEN RTI TO S1 
  36 A      0012       TON       EQU       $12                   *TURN TRACE ON (OUTPUT TO SERIAL AND SERIAL1) 
  37 A      0013       TOF       EQU       $13                   *TURN TRACE OFF 
  38 A 0000                                                      
  39 A                 * UART Status 0xF000 Read Only, Bit-1 Transmit Ready, Bit-0 Receive Ready 
  40 A                 *      Use: LDAA $F000 or LDAB $F000 
  41 A                 * UART Write Data 0xF001 
  42 A                 *      Use: STAA $F001 or STAB $F001 
  43 A                 * UART Read Data 0xF003 
  44 A                 *      Use: LDAA $F003, LDAB $F003, or ANDB $F003 
  45 A                 * I/O Data In at 0xF011 Digital pins D0 to D7 
  46 A                 *     Use: Any load instruction, maps to memory 
  47 A                 * I/O Data Out at 0xF010 Digital pins D8 to D15 
  48 A                 *     Use: STAB $F010 
  49 A                 * ADC Start Read at 0xF020 
  50 A                 *     Use: LDAB #ch then STAB $F020 where ch = 1 to 3 
  51 A                 * ADC High Byte at 0xF020, ADC Low Byte at 0xF021 
  52 A                 *     Use: Any load instruction, maps to memory  
  53 A                  
  54 A      F000       UARTST    EQU       $F000                 
  55 A      F001       UARTWR    EQU       $F001                 
  56 A      F003       UARTRD    EQU       $F003                 
  57 A      F010       IOWR      EQU       $F010                 
  58 A      F011       IORD      EQU       $F011                 

M68HC11 Absolute Assembler   Version 2.70C:app11.ASC


  59 A      F020       ADCWR     EQU       $F020                 
  60 A      F020       ADCRD     EQU       $F020                 
  61 A 0000                                                      
  62 A                 *KEY PAD INPUT 
  63 A                 *$C000 = $FF FOR NO KEY PRESSED AND $00 TO $10 FOR KEY(S) PRESSED 
  64 A                 *$C003 = KEY COLUMN-3 3,6,9,C,F  BIT DATA IS LOW FOR PRESSED KEY 
  65 A                 *$C005 = KEY COLUMN-2 2,5,8,B,E  BIT DATA IS LOW FOR PRESSED KEY 
  66 A                 *$C006 = KEY COLUMN-1 0,1,4,7,A,D BIT DATA IS LOW FOR PRESSED KEY 
  67 A 0000                                                      
  68 A      C000       KEYIN     EQU       $C000                 
  69 A      C006       KEYC1     EQU       $C006                 
  70 A      C005       KEYC2     EQU       $C005                 
  71 A      C003       KEYC3     EQU       $C003                 
  72 A 0000                                                      
  73 A                 *LCD DISPLAY 
  74 A                 *$C100 = ASCII VALUE FOR LEFT MOST DIGIT, WRITE ZERO TO USE SEGMENT BIT MODE 
  75 A                 *$C101 = ASCII VALUE FOR NEXT DIGIT, WRITE ZERO TO USE SEGMENT BIT MODE 
  76 A                 *$C102 = ASCII VALUE FOR NEXT DIGIT, WRITE ZERO TO USE SEGMENT BIT MODE 
  77 A                 *$C103 = ASCII VALUE FOR NEXT DIGIT, WRITE ZERO TO USE SEGMENT BIT MODE 
  78 A                 *$C104 = ASCII VALUE FOR NEXT DIGIT, WRITE ZERO TO USE SEGMENT BIT MODE 
  79 A                 *$C105 = ASCII VALUE FOR NEXT DIGIT, WRITE ZERO TO USE SEGMENT BIT MODE 
  80 A                 *$C106 = ASCII VALUE FOR NEXT DIGIT, WRITE ZERO TO USE SEGMENT BIT MODE 
  81 A                 *$C107 = ASCII VALUE FOR RIGHT MOST DIGIT, WRITE ZERO TO USE BIT MODE 
  82 A                 *$C110 = g, $C111 = f, ..., $C117 = d.p. SEGMENT FOR LEFT MOST DIGIT 
  83 A                 *$WRITE $01 TO SET SEGMENT, $00 TO CLEAR 
  84 A                 *REMAINING DIGITS $C120, $C130, $C140, $C150, $C160, $C170, $C180 
  85 A 0000                                                      
  86 A      C100       ASCI0     EQU       $C100                 
  87 A      C101       ASCI1     EQU       $C101                 
  88 A      C102       ASCI2     EQU       $C102                 
  89 A      C103       ASCI3     EQU       $C103                 
  90 A      C104       ASCI4     EQU       $C104                 
  91 A      C105       ASCI5     EQU       $C105                 
  92 A      C106       ASCI6     EQU       $C106                 
  93 A      C107       ASCI7     EQU       $C107                 
  94 A      C110       SG0       EQU       $C110                 
  95 A      C120       SG1       EQU       $C120                 
  96 A      C130       SG2       EQU       $C130                 
  97 A      C140       SG3       EQU       $C140                 
  98 A      C150       SG4       EQU       $C150                 
  99 A      C160       SG5       EQU       $C160                 
 100 A      C170       SG6       EQU       $C170                 
 101 A      C180       SG7       EQU       $C180                 
 102 A 0000                                                      
 103 A      0000                 ORG       $0000                 
 104 P 0000 0001       SIGN      RMB       1                     
 105 P 0001 0001       OVFLO     RMB       1                     
 106 P 0002 0001       CARRY     RMB       1                     
 107 P 0003 0001       HIBYT     RMB       1                     
 108 P 0004 0001       LOBYT     RMB       1                     
 109 P 0005 0001       RSLTH     RMB       1                     
 110 P 0006 0001       RSLTL     RMB       1                     
 111 P 0007 0002       A         RMB       2                     
 112 A                  
 113 A      0200                 ORG       $0200                 
 114 A 0200 860A       START     LDAA      #$0A                  
 115 A 0202 BDFB70               JSR       OUTCH                 
 116 A 0205 C601       LOOP      LDAB      #$01                  

M68HC11 Absolute Assembler   Version 2.70C:app11.ASC


 117 A 0207 F7F020               STAB      $F020                 
 118 A 020A B6F020               LDAA      $F020                 
 119 A 020D F6F021               LDAB      $F021                 
 120 A 0210 D704                 STAB      LOBYT                 
 121 A 0212 9703                 STAA      HIBYT                 
 122 A 0214 58                   ASLB                            
 123 A 0215 49                   ROLA                            
 124 A 0216 58                   ASLB                            
 125 A 0217 49                   ROLA                            
 126 A 0218 9707                 STAA      A                     
 127 A 021A D708                 STAB      A+1                   
 128 A 021C DB04                 ADDB      LOBYT                 
 129 A 021E D704                 STAB      LOBYT                 
 130 A 0220 9903                 ADCA      HIBYT                 
 131 A 0222 9703                 STAA      HIBYT                 
 132 A 0224 9607                 LDAA      A                     
 133 A 0226 D608                 LDAB      A+1                   
 134 A 0228 58                   ASLB                            
 135 A 0229 49                   ROLA                            
 136 A 022A 58                   ASLB                            
 137 A 022B 49                   ROLA                            
 138 A 022C DB04                 ADDB      LOBYT                 
 139 A 022E D704                 STAB      LOBYT                 
 140 A 0230 9903                 ADCA      HIBYT                 
 141 A 0232 9703                 STAA      HIBYT                 
 142 A 0234 BD0240               JSR       FRACT                 
 143 A 0237 CEF000               LDX       #$F000                
 144 A 023A 09         DLAY      DEX                             
 145 A 023B 26FD                 BNE       DLAY                  
 146 A 023D 7E0205               JMP       LOOP                  
 147 A 0240                                                      
 148 A 0240 CE0000     FRACT     LDX       #0000                 
 149 A 0243 DF05                 STX       RSLTH                 
 150 A 0245 4F                   CLRA                            
 151 A 0246 8D0A                 BSR       MULT10                
 152 A 0248 8D08                 BSR       MULT10                
 153 A 024A 8D06                 BSR       MULT10                
 154 A 024C 8D04                 BSR       MULT10                
 155 A 024E BD0288               JSR       PRT4H                 
 156 A 0251 39                   RTS                             
 157 A 0252                                                      
 158 A 0252 4F         MULT10    CLRA                            
 159 A 0253 780004               ASL       LOBYT                 
 160 A 0256 790003               ROL       HIBYT                 
 161 A 0259 49                   ROLA                            
 162 A 025A 9702                 STAA      CARRY                 
 163 A 025C 9701                 STAA      OVFLO                 
 164 A 025E D604                 LDAB      LOBYT                 
 165 A 0260 9603                 LDAA      HIBYT                 
 166 A 0262 58                   ASLB                            
 167 A 0263 49                   ROLA                            
 168 A 0264 790001               ROL       OVFLO                 
 169 A 0267 58                   ASLB                            
 170 A 0268 49                   ROLA                            
 171 A 0269 790001               ROL       OVFLO                 
 172 A 026C DB04                 ADDB      LOBYT                 
 173 A 026E D704                 STAB      LOBYT                 
 174 A 0270 9903                 ADCA      HIBYT                 

M68HC11 Absolute Assembler   Version 2.70C:app11.ASC


 175 A 0272 9703                 STAA      HIBYT                 
 176 A 0274 9601                 LDAA      OVFLO                 
 177 A 0276 9902                 ADCA      CARRY                 
 178 A 0278 C604                 LDAB      #4                    
 179 A 027A 780006     SHFT4     ASL       RSLTL                 
 180 A 027D 790005               ROL       RSLTH                 
 181 A 0280 5A                   DECB                            
 182 A 0281 26F7                 BNE       SHFT4                 
 183 A 0283 9A06                 ORAA      RSLTL                 
 184 A 0285 9706                 STAA      RSLTL                 
 185 A 0287 39                   RTS                             
 186 A 0288                                                      
 187 A 0288 860D       PRT4H     LDAA      #$0D                  
 188 A 028A BDFB70               JSR       OUTCH                 
 189 A 028D 8620                 LDAA      #$20                  
 190 A 028F BDFB70               JSR       OUTCH                 
 191 A 0292 9605                 LDAA      RSLTH                 
 192 A 0294 44                   LSRA                            
 193 A 0295 44                   LSRA                            
 194 A 0296 44                   LSRA                            
 195 A 0297 44                   LSRA                            
 196 A 0298 8AB0                 ORAA      #$B0                  
 197 A 029A BDFB70               JSR       OUTCH                 
 198 A 029D 9605                 LDAA      RSLTH                 
 199 A 029F 840F                 ANDA      #$0F                  
 200 A 02A1 8A30                 ORAA      #$30                  
 201 A 02A3 BDFB70               JSR       OUTCH                 
 202 A 02A6 9606                 LDAA      RSLTL                 
 203 A 02A8 BDFBEA               JSR       OUT2H                 
 204 A 02AB 39                   RTS                             
 205 A 02AC                                                      
 206 A                           END                             

SYMBOL TABLE:  Total Entries=   71

A                   0007    NMIV                00FD
ADCRD               F020    OUT2H               FBEA
ADCWR               F020    OUTCH               FB70
ADDR                00E7    OVFLO               0001
ASCI0               C100    PRT4H               0288
ASCI1               C101    PRTADD              FE90
ASCI2               C102    PRTDAT              FE90
ASCI3               C103    PRTSTR              FC8A
ASCI4               C104    RESET               FC00
ASCI5               C105    RESETV              FC00
ASCI6               C106    RS1                 0015
ASCI7               C107    RS2                 0005
BRKADD              00EA    RSLTH               0005
BRKOP               00EC    RSLTL               0006
CARRY               0002    SG0                 C110
CH2HNP              FD2B    SG1                 C120
CHG2H               FD28    SG2                 C130
CHG4H               FDF8    SG3                 C140
DLAY                023A    SG4                 C150
FLAG                00E9    SG5                 C160
FRACT               0240    SG6                 C170
GET2H               FCE4    SG7                 C180
GET4H               FD05    SHFT4               027A
GETKEY              FCC3    SIGN                0000
HIBYT               0003    SS2                 0002
IORD                F011    START               0200
IOWR                F010    SWIV                00F4
IRQV                00F7    T2X                 0004
KEYC1               C006    TEMP                00E4
KEYC2               C005    TOF                 0013
KEYC3               C003    TON                 0012
KEYIN               C000    TX2                 0003
LOBYT               0004    UARTRD              F003
LOOP                0205    UARTST              F000
MKASCI              FCDA    UARTWR              F001
MULT10              0252    

Total errors: 0
